# 撸了么 (Luleme) - 项目蓝图

## 项目概述

撸了么是一款私密的个人健康追踪应用，专注于帮助用户记录和管理个人健康数据，提供统计分析和健康建议。应用遵循Material Design 3设计规范，注重用户隐私保护。

### 核心价值
- **隐私优先**：所有数据仅存储在本地，无需网络连接
- **简洁易用**：一键记录，直观统计
- **科学指导**：提供基于频率的健康建议

## 设计规范

### 主题配色
- **主色调**：深紫色 (Deep Purple) - FlexScheme.deepPurple
- **支持深色模式**：自动跟随系统设置
- **Material Design 3**：使用最新的Material 3组件和设计语言
- **FlexColorScheme**：提供一致的配色方案和主题

### UI设计原则
1. **极简主义**：减少视觉干扰，突出核心功能
2. **卡片式布局**：使用圆角卡片和阴影营造层次感
3. **渐变背景**：关键区域使用渐变色增强视觉吸引力
4. **图标驱动**：大量使用Material Icons表达功能
5. **响应式设计**：适配不同屏幕尺寸

### 颜色使用
- 蓝色：周统计
- 绿色：月统计
- 紫色：总计
- 橙色：分析
- 红色：删除/警告
- 琥珀色：注意事项

## 功能详细设计

### 1. 主页面 (HomeScreen)

#### 布局结构
```
AppBar: "撸了么"
├── 快速记录区域 (Hero Section)
│   ├── 爱心图标 (64px)
│   ├── 标题："记录你的时刻"
│   └── 快速记录按钮
├── 统计概览卡片
│   ├── 本周统计 (蓝色)
│   ├── 本月统计 (绿色)
│   ├── 总计统计 (紫色)
│   └── 统计入口 (橙色)
├── 导航按钮
│   ├── 查看详细统计
│   └── 健康建议
└── 最近记录列表 (显示最近5条)
```

#### 交互功能
- **快速记录对话框**：
  - 可选备注输入框 (多行文本)
  - 可选感受评分 (1-5星)
  - 保存/取消按钮
- **记录删除**：长按或点击删除图标，弹出确认对话框
- **导航**：点击卡片跳转到对应页面

### 2. 统计页面 (StatisticsScreen)

#### 数据展示
1. **统计卡片**
   - 本周次数
   - 本月次数
   - 总计次数

2. **图表展示**
   - **最近7天趋势**：柱状图
     - X轴：周一到周日
     - Y轴：次数
     - 支持触摸查看详细数据
   - **本月统计**：柱状图（按周分组）
     - X轴：第1-4周
     - Y轴：次数
     - 渐变色柱状图

3. **健康洞察**
   - 根据周平均频率给出评价：
     - ≤2次/天：频率适中 (绿色)
     - 2-4次/天：频率稍高 (橙色)
     - >4次/天：频率过高 (红色)
   - 显示周平均和月总计

### 3. 健康建议页面 (AdviceScreen)

#### 内容板块
1. **头部区域**
   - 健康图标
   - "健康生活指南"标题
   - 副标题

2. **建议卡片**（6张）
   - **保持适度**：建议每周2-3次
   - **规律作息**：充足睡眠，避免熬夜
   - **健康饮食**：均衡营养，补充锌和维生素E
   - **适度运动**：每周3-4次有氧运动
   - **心理健康**：保持积极心态，必要时寻求帮助
   - **私密保护**：注意个人卫生和隐私安全

3. **注意事项**（黄色警告区域）
   - 频率过高时建议寻求专业帮助
   - 出现身体不适请及时就医
   - 避免影响正常生活
   - 未成年人需要家长指导

4. **更多资源**
   - 建议咨询专业医生
   - 应用仅供追踪，不构成医疗建议
   - 强调健康生活方式

## 数据架构

### EventRecord 模型
```dart
class EventRecord {
  DateTime timestamp;    // 记录时间
  String? notes;        // 可选备注
  int? rating;          // 可选评分 (1-5)
}
```

### 存储方案
- **技术**：Hive NoSQL数据库
- **位置**：本地设备存储
- **加密**：可选（未来版本）
- **备份**：用户手动导出（未来版本）

### 数据操作
- 添加记录：`addEvent()`
- 删除记录：`deleteEvent(index)`
- 查询全部：`getAllEvents()`
- 范围查询：`getEventsInRange(start, end)`
- 统计计算：在EventController中实现

## 状态管理

### GetX Controller
```
EventController
├── events: RxList<EventRecord>
├── isLoading: RxBool
├── initStorage()
├── loadEvents()
├── addEvent()
├── deleteEvent()
├── getTotalCount()
├── getWeeklyCount()
├── getMonthlyCount()
├── getEventsForLastDays()
├── getWeeklyStats()
└── getMonthlyStats()
```

## 技术实现

### 依赖包
```yaml
dependencies:
  flutter: sdk
  get: ^4.7.2                    # 状态管理
  hive: ^2.2.3                   # 本地数据库
  hive_flutter: ^1.1.0           # Hive Flutter支持
  fl_chart: ^0.70.1              # 图表库
  flex_color_scheme: ^8.2.0      # 主题管理
  shared_preferences: ^2.5.3     # 简单配置存储
  intl: ^0.20.1                  # 国际化和日期格式化

dev_dependencies:
  hive_generator: ^2.0.1         # Hive代码生成
  build_runner: ^2.4.13          # 代码生成工具
```

### 代码组织
```
lib/
├── main.dart                  # 应用入口，主题配置
├── controllers/               # GetX控制器
├── models/                    # 数据模型
├── screens/                   # 页面UI
└── services/                  # 业务逻辑服务
```

## 目标平台

### 当前支持
- Android
- Web

### 发布计划
- Google Play Store
- 可能支持iOS（取决于需求）

## 隐私与安全

### 隐私保护措施
1. 所有数据仅存储在本地
2. 不需要网络权限
3. 不收集任何用户信息
4. 不使用任何追踪或分析服务（Firebase Analytics已注释）
5. 应用名称和图标适合在公共场合使用

### 数据安全
- 使用Hive加密存储（可选功能）
- 支持应用锁定（未来版本）
- 数据导出/导入功能（未来版本）

## 未来规划

### 版本 1.1 (计划中)
- [ ] 数据加密
- [ ] 应用锁定（PIN/指纹）
- [ ] 数据导出/导入
- [ ] 更多图表类型

### 版本 1.2 (考虑中)
- [ ] 目标设定功能
- [ ] 提醒和通知
- [ ] 更详细的健康建议
- [ ] 多语言支持

### 版本 2.0 (远期)
- [ ] iOS支持
- [ ] 自定义主题
- [ ] 高级统计分析
- [ ] 健康评分系统

## 开发规范

### 代码风格
- 遵循 Dart 官方代码风格
- 使用 flutter_lints
- 所有公共API添加注释
- 使用有意义的变量名

### Git工作流
- 主分支：main
- 功能分支：feature/xxx
- 修复分支：fix/xxx
- 提交信息使用中英文混合

### 测试策略
- 单元测试：核心业务逻辑
- Widget测试：关键UI组件
- 集成测试：完整用户流程

## 项目状态

### 已完成功能 ✅
- [x] 基础项目结构
- [x] 数据模型定义
- [x] Hive本地存储
- [x] GetX状态管理
- [x] 主页面UI
- [x] 快速记录功能
- [x] 统计页面和图表
- [x] 健康建议页面
- [x] Material 3主题
- [x] 深色模式支持

### 待完成功能 🚧
- [ ] 完整测试
- [ ] 应用图标和启动屏
- [ ] 性能优化
- [ ] 用户手册
- [ ] Google Play发布准备

### 已知问题 🐛
- 无

---

*最后更新：2026-01-12*
*版本：1.0.0*
